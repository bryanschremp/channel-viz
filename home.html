<html>
<head>
  <title>Home Temps</title>
  <style type="text/css">
    
    body {
      padding: 0;
      color: white;
      background-color: #000000;
      font-family: "Helvetica Neue", helvetica, arial, sans-serif;
    }
    
    .DateTime {
        width: 550px;
        padding: 2px;
        text-align: right;
        font-size: 47px;
    }
    
    #Day {
        display:inline-block;
        text-align: right;
        font-size: 47px;
    }

    #Date {
        display:inline-block;
        text-align: right;
        font-size: 47px;
    }

    #CurrentTime {
        text-align: right;
        font-size: 47px;
    }
    
   .ValueDiv {
        width: 550px;
        padding: 3px;
        border: 2px solid;
        border-radius: 20px;
        background-color: DarkSlateBlue;
   }

   .Zone {
       padding: 3px;
       font-size: 47px;
       text-shadow: 4px 4px 4px black;
   }

   .lbl{
      width: 320px;
      padding: 3px;
      display:inline-block;
      text-align: right;
      vertical-align: bottom;
      font-size: 47px;
      text-shadow: 4px 4px 4px black;
   }

   .val{
      display:inline-block;
      vertical-align: bottom;
      font-size: 80px;
      text-shadow: 4px 4px 4px black;
   }

   .TimestampDiv {
       width: 550px;
       text-align: right;
       font-size: 30px;
   }

   .data {
       display:inline-block;
       font-size: 30px;
   }

  </style>
</head>
<body onload="updateClock(); setInterval('updateClock()', 60000);">
    <div class="DateTime">
        <div id="Day"> </div> <div id="Date"> </div>
        <div id="CurrentTime"> </div>
    </div>
    <div class="ValueDiv">
        <div class="Zone">Indoor</div>
        <div class="lbl">Temp</div>
        <div class="val">&nbsp;<span id="Indoor_Temp"> </span>F</div>
        <br/>
        <div class="lbl">Humidity</div>
        <div class="val">&nbsp;<span id="Indoor_Humidity"> </span>%</div>
    </div>
    <div class="ValueDiv">
        <div class="Zone">Outdoor</div>
        <div class="lbl">Temp</div>
        <div class="val">&nbsp;<span id="Outdoor_Temp"> </span>F</div>
        <br />
        <div class="lbl">Humidity</div>
        <div class="val">&nbsp;<span id="Outdoor_Humidity"> </span>%</div>
    </div>
    <br />
    <br />
    <div class="TimestampDiv">
        <div class="data">Updated</div>
        <div class="data">&nbsp;<span id="Timestamp"> </span></div>
    </div>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="js/xivelyjs-1.0.0.min.js"></script>
    <script>
        
        var days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];

        $(document).ready(function ($) {
            xively.setKey("Po7EWwTloChQAz2HIJitKwCE8ivLVACilaIokUFo3e9459gc");

            var feedID = 1479543148;

            var dt = new Date();
            document.getElementById("Day").innerHTML = days[dt.getDay()];
            document.getElementById("Date").innerHTML = dt.toLocaleDateString();

            xively.feed.get(feedID, function (feed) {

                $('#Timestamp').html(feed["updated"]);

                xively.feed.subscribe(feedID, "updated", function (event, feedUpdated) {
                    $('#Timestamp').html(feedUpdated["updated"]);
                });
            });

            xively.datastream.get(feedID, "Indoor_Temp", function (datastream) {

                $('#Indoor_Temp').html(datastream["current_value"]);

                xively.datastream.subscribe(feedID, "Indoor_Temp", function (event, datastream_updated) {
                    $('#Indoor_Temp').html(datastream_updated["current_value"]);
                });

            });

            xively.datastream.get(feedID, "Indoor_Humidity", function (datastream) {

                $('#Indoor_Humidity').html(datastream["current_value"]);

                xively.datastream.subscribe(feedID, "Indoor_Humidity", function (event, datastream_updated) {
                    $('#Indoor_Humidity').html(datastream_updated["current_value"]);
                });
            });

            xively.datastream.get(feedID, "Outdoor_Temp", function (datastream) {

                $('#Outdoor_Temp').html(datastream["current_value"]);

                xively.datastream.subscribe(feedID, "Outdoor_Temp", function (event, datastream_updated) {
                    $('#Outdoor_Temp').html(datastream_updated["current_value"]);
                });
            });

            xively.datastream.get(feedID, "Outdoor_Humidity", function (datastream) {

                $('#Outdoor_Humidity').html(datastream["current_value"]);

                xively.datastream.subscribe(feedID, "Outdoor_Humidity", function (event, datastream_updated) {
                    $('#Outdoor_Humidity').html(datastream_updated["current_value"]);
                });
            });

        });

        function updateClock() {
            var currentTime = new Date();
            var currentHours = currentTime.getHours();
            var currentMinutes = currentTime.getMinutes();

            // Pad the minutes and seconds with leading zeros, if required
            currentMinutes = (currentMinutes < 10 ? "0" : "") + currentMinutes;

            // Choose either "AM" or "PM" as appropriate
            var timeOfDay = (currentHours < 12) ? "AM" : "PM";

            // Convert the hours component to 12-hour format if needed
            currentHours = (currentHours > 12) ? currentHours - 12 : currentHours;

            // Convert an hours component of "0" to "12"
            currentHours = (currentHours == 0) ? 12 : currentHours;

            // Compose the string for display
            var currentTimeString = currentHours + ":" + currentMinutes + " " + timeOfDay;

            // Update the time display
            document.getElementById("CurrentTime").firstChild.nodeValue = currentTimeString;
        }
    </script>
</body>

</html>
