<!DOCTYPE html>
<html>
    <head>
        <title>Home Temps</title>
        <meta http-equiv="refresh" content="600">
        <style type="text/css">        
        body { 
            background-color: black;
            font-family: 'Merriweather Sans', sans-serif;
            color: ghostwhite;
        }
                               
        @import url(http://fonts.googleapis.com/css?family=Merriweather+Sans:300,400,700);
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            updateClock();
            getTemps();
            setInterval('updateClock()', 60000);
            setInterval('getTemps()', 120000);
        });
        
        function getTemps() {
             $.ajax({
                 url: "https://api.thingspeak.com/channels/33195/feeds.json?results=2",
                dataType: "json",
                success: function(data) {
                    console.log(data.feeds[0].field3);
                    console.log(data.feeds[0].field2);
                    $('#Indoor_Temp').html(data.feeds[0].field3.substr(0, 4));
                    $('#indoorRH').html(data.feeds[0].field2.substr(0, 2));
                }
            });
                       
            $.ajax({
                url: "https://api.thingspeak.com/channels/21626/fields/1.json?results=1",
                dataType: "json",
                success: function(data) {
                    console.log(data.feeds[0].field1);
                    //$('#Outdoor_Temp ).html(data.feeds[0].field1);
                    $('#Outdoor_Temp').html(data.feeds[0].field1.substr(0, 4));
                }
            });
        }

        function updateClock() {
            var dt = new Date();
            var currentHours = dt.getHours();
            var currentMinutes = dt.getMinutes();
            // Pad the minutes and seconds with leading zeros, if required
            currentMinutes = (currentMinutes < 10 ? "0" : "") + currentMinutes;
            // Choose either "AM" or "PM" as appropriate
            var timeOfDay = (currentHours < 12) ? "AM" : "PM";
            // Convert the hours component to 12-hour format if needed
            currentHours = (currentHours > 12) ? currentHours - 12 : currentHours;
            // Convert an hours component of "0" to "12"
            currentHours = (currentHours == 0) ? 12 : currentHours;
            var currentTimeString = currentHours + ":" + currentMinutes + " " + timeOfDay;
            $( '#time' ).html(currentTimeString);
            var d = new Date();
            var days = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
            $( '#text_day' ).html(days[d.getDay()]);
            var currentDateString = (dt.getMonth()+1) + "/" + dt.getDate();
            $( '#text_date' ).html(currentDateString);
        }
    </script>
</head>
<body>
<table style="width:100%; border:5px solid white; border-collapse: collapse;">
    <tr>
        <td style="width:33%;"><h2>Outdoor</h2></td>
        <td style="width:33%; text-align:center;"><h2><span id="text_day"></span></h2></td>
        <td style="width:33%; text-align:right;"><h2>Indoor</h2></td>
    </tr>
    <tr>
        <td style="width:33%;"><h1><span id="Outdoor_Temp"></span></h1>F</td>
        <td style="width:33%; text-align:center;"><h1><span id="text_date"></span></h1></td>
        <td style="width:33%; text-align:right;"><h1><span id="Indoor_Temp"></span></h1>F<br/> 
            <h1><span id="indoorRH"></span></h1>%</td>
    </tr>
    <tr colspan="3">
        <td style="text-align:center;"><h1><span id="time"></span></h2></td>
    </tr>
</table>
</body>
</html>
